--TAREFAS QUE FORAM FINALIZADAS EM 2024 E ESTÃO COM STATUS FALSE
SELECT Titulo FROM Tarefas WHERE YEAR(DataFinalizacao) = 2024 AND Status = 0 ORDER BY DataFinalizacao DESC;

--QUANTIDADE DE TAREFAS QUE ESTÃO ATIVAS E FORAM CRIADAS ANTES DO 1°DE JANEIRO DE 2024
SELECT COUNT(*) From Tarefas WHERE Status = 1 AND DataCriacao < '2024-01-01';

--SELECIONAR TODOS OS DADOS DE TAREFAS CRIADAS EM NOVEMBRO
SELECT * FROM Tarefas WHERE YEAR(DataCriacao) = 2024 AND MONTH(DataCriacao) = 11 ORDER BY Titulo ASC;

-SELECIONAR DADOS DE TAREFAS QUE ESTÃO DESATIVADAS OU FORAM FINALIZADAS APÓS O DIA 31 DE OUTUBRO DE 2024, ORDENADO PELA DATA DE FINALIZAÇÃO CRESCENTE
SELECT Titulo, Descricao, Status FROM Tarefas WHERE Status = 1 AND DataFinalizacao > '2024-10-31T00:00:00' ORDER BY DataFinalizacao ASC;

--SELECIONAR TITULO E DATA DE CRIAÇÃO DE TAREFAS CRIADAS ENTRE 1° DE SETEMBRO E 1° DE OUTUBRO
SELECT Titulo, DataCriacao FROM Tarefas WHERE DataCriacao BETWEEN '2024-09-01T00:00:00' AND '2024-10-01T00:00:00' ORDER BY DataCriacao DESC;

--SELECIONAR TAREFAS QUE FORAM FINALIZADAS ENTRE O DIA 1 DE NOVEMBRO E O DIA 29
SELECT * FROM Tarefas WHERE DataFinalizacao BETWEEN '2024-11-01T07:00:00' AND '2024-11-29T07:00:00'ORDER BY DataFinalizacao ASC;

--SELECIONAR TAREFA QUE TENHAM "TAREFA" NO TITULO
SELECT * FROM Tarefas WHERE Titulo LIKE '%Tarefa%';


--PROCEDURE
CREATE PROCEDURE AddTarefa
	@Id UNIQUEIDENTIFIER,
	@Titulo NVARCHAR(48),
	@Descricao NVARCHAR(255),
	@DataCriacao DATE,
	@DataFinalizacao DATE,
	@Status BIT
AS
BEGIN
	INSERT INTO Tarefas (Id, Titulo, Descricao, DataCriacao, DataFinalizacao, Status)
	VALUES (@iD, @Titulo, @Descricao, GETDATE(), @DataFinalizacao, @Status);
END

--RODAR A PROCEDURE
DECLARE @Id UNIQUEIDENTIFIER = NEWID();
EXEC AddTarefa @Id, 'Nova Tarefa', 'Descrição da tarefa', GETDATE(), '2024-12-31T00:00:00', 1;